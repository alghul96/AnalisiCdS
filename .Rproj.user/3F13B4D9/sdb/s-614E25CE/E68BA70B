{
    "collab_server" : "",
    "contents" : "load(\".RData\")\nlibrary(epicalc)\nlibrary(survival)\nlibrary(ggfortify)\nlibrary(gridExtra)\nlibrary(ggplot2)\n###########################\n#### OVERALL SURVIVAL #####\n\n\n# Creazione dell'oggetto survivial\nuse(survival)\n\n\nmsurv<- Surv(`OVERALL SURVIVAL (mesi)`, Morto == 1)\n\nmfit <- survfit((msurv)~1)\noptions(survfit.print.mean = TRUE)\nmy.fit = summary(mfit)\n\n#### PLOT DELLA CURVA DELLA SOPRAVVIVENZA ####\n\nplot(mfit, main = \"Funzione di sopravvivenza\", xlab = \"Mesi dall'operazione\")\nov_surv_curv<-autoplot(mfit, main = \"Funzione di sopravvivenza\", xlab = \"Mesi dall'operazione\", surv.colour = \"orange\", censor.colour = \"red\", ylim=c(0,1))\n \n\n### STIMA DELLA CUMULATIVE HAZARD FUNCTION ####\n\nplot(mfit, fun=\"cumhaz\", main = \"Funzione cumulativa di rischio (-logS(t))\") # funzione cumulativa di rischio \nov_cum_haz<-autoplot(mfit,fun=\"cumhaz\",main = \"Funzione cumulativa di rischio (-log S(t))\",surv.colour = \"skyblue1\",censor.colour = \"blue\")\n\n#### ANALISI DELLE COVARIATE: LNR ####\n\n#### Analisi della sopravvivenza\n\nmfit.LNR = survfit(msurv ~ survival$`LNR CLASSE`)\n\nmfit.LNR\n\npar(mfrow = c(1,2))\nplot(mfit.LNR, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Sopravvivenza per LNR\")\nplot(mfit.LNR, conf.int = TRUE, col = c(\"red\", \"green\", \"blue\"))\nlegend(\"topright\", legend = c(\"Classe 0\",\"Classe 1\", \"Classe 2\"), col = c(\"red\", \"green\", \"blue\"), lty = c(1,1,1))\n\nov_lnr<-autoplot(mfit.LNR,conf.int = F)\nov_lnr_conf<-autoplot(mfit.LNR)\n\n#### Log Rank test\n\nsurvdiff(msurv ~ survival$`LNR CLASSE`, rho = 0) # rifiutiamo l'hp che le curve di sopravvivenza sono uguali\n\n\n#### ANALISI DELLE COVARIATE: LODDS ####\n\n#### Analisi della sopravvivenza\n\nmfit.LODDS = survfit(msurv ~ survival$`LODDS CLASSE`)\n\nmfit.LODDS\n\npar(mfrow = c(1,2))\nplot(mfit.LODDS, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Sopravvivenza per LODDS\")\nplot(mfit.LODDS, conf.int = TRUE, col = c(\"red\", \"green\", \"blue\"))\nlegend(\"topright\", legend = c(\"Classe 0\",\"Classe 1\", \"Classe 2\"), col = c(\"red\", \"green\", \"blue\"), lty = c(1,1,1))\n\nov_lodds<-autoplot(mfit.LODDS,conf.int = F)\nov_lodds_conf<-autoplot(mfit.LODDS)\n\n#### Log Rank test\n\nsurvdiff(msurv ~ survival$`LODDS CLASSE`, rho = 0) # rifiutiamo l'hp che le curve di sopravvivenza sono uguali\n\n\n# Confronto tra le due curve\n\npar(mfrow = c(1,2))\nplot(mfit.LODDS, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Sopravvivenza per LODDS\")\nplot(mfit.LNR, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Sopravvivenza per LNR\")\n\n#grid.arrange(ov_lodds, ov_lnr,ncol=2,nrow = 1)\n\n# Kaplanâ€“Meier survival curves of the patients staged by log odds of positive lymph nodes (LODDS) and lymph node ratio.\n\n################################\n#### DISEASE-FREE SURVIVAL #####\n\n\ndisurv<- Surv(`DISEASE- FREE SURVIVAL (mesi)`, Morto == 1)\n\ndifit <- survfit((disurv)~1)\noptions(survfit.print.mean = TRUE)\nmy.fit = summary(difit)\n\n#### PLOT DELLA CURVA DELLA SOPRAVVIVENZA ####\n\nplot(difit, main = \"Funzione di sopravvivenza Disease-Free\", xlab = \"Mesi dall'operazione\")\ndf_surv_curv<-autoplot(difit,,surv.colour = \"orange\",censor.colour = \"red\",ylim=c(0,1),main = \"Funzione di sopravvivenza\")\n\n### STIMA DELLA CUMULATIVE HAZARD FUNCTION ####\n\nplot(difit, fun=\"cumhaz\", main = \"Funzione cumulativa del Rischio (-logS(t))\") # funzione cumulativa di rischio \ndf_cum_haz<-autoplot(difit,fun=\"cumhaz\",surv.colour = \"skyblue1\",censor.colour = \"blue\",main = \"Funzione cumulativa di rischio (-log S(t))\")\n\n#### ANALISI DELLE COVARIATE: LNR ####\n\n#### Analisi della sopravvivenza\n\ndifit.LNR = survfit(disurv ~ survival$`LNR CLASSE`)\n\ndifit.LNR\n\npar(mfrow = c(1,2))\nplot(difit.LNR, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Disease-Free per LNR\")\nplot(difit.LNR, conf.int = TRUE, col = c(\"red\", \"green\", \"blue\"))\nlegend(\"topright\", legend = c(\"Classe 0\",\"Classe 1\", \"Classe 2\"), col = c(\"red\", \"green\", \"blue\"), lty = c(1,1,1))\n\ndf_lnr<-autoplot(difit.LNR,conf.int = F)\ndf_lnr_conf<-autoplot(difit.LNR)\n\n#### Log Rank test\n\nsurvdiff(disurv ~ survival$`LNR CLASSE`, rho = 0) # rifiutiamo l'hp che le curve di sopravvivenza sono uguali\n\n\n\n#### ANALISI DELLE COVARIATE: LODDS ####\n\n#### Analisi della sopravvivenza\n\ndifit.LODDS = survfit(disurv ~ survival$`LODDS CLASSE`)\n\ndifit.LODDS\n\npar(mfrow = c(1,2))\nplot(difit.LODDS, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Disease-Free per LODDS\")\nplot(difit.LODDS, conf.int = TRUE, col = c(\"red\", \"green\", \"blue\"))\nlegend(\"topright\", legend = c(\"Classe 0\",\"Classe 1\", \"Classe 2\"), col = c(\"red\", \"green\", \"blue\"), lty = c(1,1,1))\n\ndf_lodds_conf<-autoplot(difit.LODDS)\ndf_lodds<-autoplot(difit.LODDS,conf.int = F)\n\n#### Log Rank test\n\nsurvdiff(disurv ~ survival$`LODDS CLASSE`, rho = 0) # rifiutiamo l'hp che le curve di sopravvivenza sono uguali\n\n\n######################################################\n### CONFRONTO TRA DISEASE FREE E OVERALL SURVIVAL ####\n\n\nwindows()\npar(mfrow = c(2,2))\n\nplot(mfit.LNR, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Sopravvivenza Totale per LNR\")\nplot(difit.LNR, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Sopravvivenza Disease Free per LNR\")\nlegend(\"topright\", legend = c(\"Classe 0\",\"Classe 1\", \"Classe 2\"), col = c(\"red\", \"green\", \"blue\"), lty = c(1,1,1))\n\n\nplot(mfit.LODDS, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Sopravvivenza Totale per LODDS\")\nplot(difit.LODDS, conf.int = FALSE, col = c(\"red\", \"green\", \"blue\"), main = \"Sopravvivenza Disease Free per LODDS\")\nlegend(\"topright\", legend = c(\"Classe 0\",\"Classe 1\", \"Classe 2\"), col = c(\"red\", \"green\", \"blue\"), lty = c(1,1,1))\n\n#grid.arrange(ov_lnr,df_lnr,ov_lodds,df_lodds,ncol=2,nrow = 2)\n\n##### Grafici\nov_surv_curv\nov_cum_haz\nov_lnr\nov_lnr_conf\nov_lodds\nov_lodds_conf\nov_loods_lnr<-grid.arrange(ov_lodds, ov_lnr,ncol=2,nrow = 1)\n\ndf_surv_curv\ndf_cum_haz\ndf_lnr\ndf_lnr_conf\ndf_lodds_conf\ndf_lodds\n\nov_df<-grid.arrange(ov_lnr,df_lnr,ov_lodds,df_lodds,ncol=2,nrow = 2)",
    "created" : 1493909882432.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2062413994",
    "id" : "E68BA70B",
    "lastKnownWriteTime" : 1493910084,
    "last_content_update" : 1493910084175,
    "path" : "~/GitHub/AnalisiCdS/nonParametrica.R",
    "project_path" : "nonParametrica.R",
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}